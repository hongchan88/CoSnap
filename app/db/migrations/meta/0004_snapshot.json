{
  "id": "747bd60a-cd63-499b-a416-d447abb11c07",
  "prevId": "36c3e43e-08fd-4668-9dea-8deb799c7a9c",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.flags": {
      "name": "flags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "country": {
          "name": "country",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "latitude": {
          "name": "latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "visibility_status": {
          "name": "visibility_status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "source_policy_type": {
          "name": "source_policy_type",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'free'"
        },
        "exposure_policy": {
          "name": "exposure_policy",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'default'"
        },
        "cutoff_at": {
          "name": "cutoff_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "flags_user_id_profiles_profile_id_fk": {
          "name": "flags_user_id_profiles_profile_id_fk",
          "tableFrom": "flags",
          "tableTo": "profiles",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "flags_insert_policy": {
          "name": "flags_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "(select auth.uid()) = \"flags\".\"user_id\""
        },
        "flags_select_policy": {
          "name": "flags_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "true"
        },
        "flags_select_offer_participant_policy": {
          "name": "flags_select_offer_participant_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "exists (\n        select 1\n        from offers\n        where offers.flag_id = \"flags\".\"id\"\n          and ((select auth.uid()) = offers.sender_id or (select auth.uid()) = offers.receiver_id)\n      )"
        },
        "flags_update_policy": {
          "name": "flags_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"flags\".\"user_id\"",
          "withCheck": "(select auth.uid()) = \"flags\".\"user_id\""
        },
        "flags_delete_policy": {
          "name": "flags_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"flags\".\"user_id\""
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.matches": {
      "name": "matches",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "offer_id": {
          "name": "offer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_a_id": {
          "name": "user_a_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_b_id": {
          "name": "user_b_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "flag_id": {
          "name": "flag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "location_hint": {
          "name": "location_hint",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "verify_status": {
          "name": "verify_status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'unverified'"
        },
        "status": {
          "name": "status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "focus_reward_applied": {
          "name": "focus_reward_applied",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "credit_reward_applied": {
          "name": "credit_reward_applied",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "matches_offer_id_offers_id_fk": {
          "name": "matches_offer_id_offers_id_fk",
          "tableFrom": "matches",
          "tableTo": "offers",
          "columnsFrom": [
            "offer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matches_user_a_id_profiles_profile_id_fk": {
          "name": "matches_user_a_id_profiles_profile_id_fk",
          "tableFrom": "matches",
          "tableTo": "profiles",
          "columnsFrom": [
            "user_a_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matches_user_b_id_profiles_profile_id_fk": {
          "name": "matches_user_b_id_profiles_profile_id_fk",
          "tableFrom": "matches",
          "tableTo": "profiles",
          "columnsFrom": [
            "user_b_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matches_flag_id_flags_id_fk": {
          "name": "matches_flag_id_flags_id_fk",
          "tableFrom": "matches",
          "tableTo": "flags",
          "columnsFrom": [
            "flag_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "matches_offer_id_unique": {
          "name": "matches_offer_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "offer_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.offers": {
      "name": "offers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "sender_id": {
          "name": "sender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "receiver_id": {
          "name": "receiver_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "flag_id": {
          "name": "flag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "respond_by": {
          "name": "respond_by",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "offers_sender_id_profiles_profile_id_fk": {
          "name": "offers_sender_id_profiles_profile_id_fk",
          "tableFrom": "offers",
          "tableTo": "profiles",
          "columnsFrom": [
            "sender_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "offers_receiver_id_profiles_profile_id_fk": {
          "name": "offers_receiver_id_profiles_profile_id_fk",
          "tableFrom": "offers",
          "tableTo": "profiles",
          "columnsFrom": [
            "receiver_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "offers_flag_id_flags_id_fk": {
          "name": "offers_flag_id_flags_id_fk",
          "tableFrom": "offers",
          "tableTo": "flags",
          "columnsFrom": [
            "flag_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "offers_insert_policy": {
          "name": "offers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "(select auth.uid()) = \"offers\".\"sender_id\""
        },
        "offers_select_policy": {
          "name": "offers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"offers\".\"sender_id\" OR (select auth.uid()) = \"offers\".\"receiver_id\""
        },
        "offers_update_sender_policy": {
          "name": "offers_update_sender_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"offers\".\"sender_id\"",
          "withCheck": "(select auth.uid()) = \"offers\".\"sender_id\""
        },
        "offers_update_receiver_policy": {
          "name": "offers_update_receiver_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"offers\".\"receiver_id\"",
          "withCheck": "(select auth.uid()) = \"offers\".\"receiver_id\""
        },
        "offers_delete_policy": {
          "name": "offers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"offers\".\"sender_id\""
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'free'"
        },
        "focus_score": {
          "name": "focus_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "focus_tier": {
          "name": "focus_tier",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true,
          "default": "'Blurry'"
        },
        "cocredit_balance": {
          "name": "cocredit_balance",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "camera_gear": {
          "name": "camera_gear",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "styles": {
          "name": "styles",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "languages": {
          "name": "languages",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "profiles_profile_id_users_id_fk": {
          "name": "profiles_profile_id_users_id_fk",
          "tableFrom": "profiles",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "profiles_username_unique": {
          "name": "profiles_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        }
      },
      "policies": {
        "profile_insert_policy": {
          "name": "profile_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "(select auth.uid()) = \"profiles\".\"profile_id\""
        },
        "profile_select_policy": {
          "name": "profile_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "true"
        },
        "profile_update_policy": {
          "name": "profile_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "(select auth.uid()) = \"profiles\".\"profile_id\"",
          "withCheck": "(select auth.uid()) = \"profiles\".\"profile_id\""
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.reviews": {
      "name": "reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "match_id": {
          "name": "match_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_id": {
          "name": "target_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "rating": {
          "name": "rating",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photo_sample_url": {
          "name": "photo_sample_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "reviews_match_id_matches_id_fk": {
          "name": "reviews_match_id_matches_id_fk",
          "tableFrom": "reviews",
          "tableTo": "matches",
          "columnsFrom": [
            "match_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reviews_author_id_profiles_profile_id_fk": {
          "name": "reviews_author_id_profiles_profile_id_fk",
          "tableFrom": "reviews",
          "tableTo": "profiles",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reviews_target_id_profiles_profile_id_fk": {
          "name": "reviews_target_id_profiles_profile_id_fk",
          "tableFrom": "reviews",
          "tableTo": "profiles",
          "columnsFrom": [
            "target_id"
          ],
          "columnsTo": [
            "profile_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}